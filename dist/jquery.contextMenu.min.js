!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ContextMenuManager=t():e.ContextMenuManager=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(7);t.default={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,hideOnSecondTrigger:!1,selectableSubMenu:!1,className:"",classNames:{hover:"context-menu-hover",disabled:"context-menu-disabled",visible:"context-menu-visible",notSelectable:"context-menu-not-selectable",icon:"context-menu-icon",iconEdit:"context-menu-icon-edit",iconCut:"context-menu-icon-cut",iconCopy:"context-menu-icon-copy",iconPaste:"context-menu-icon-paste",iconDelete:"context-menu-icon-delete",iconAdd:"context-menu-icon-add",iconQuit:"context-menu-icon-quit",iconLoadingClass:"context-menu-icon-loading"},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:$.noop,hide:$.noop,activated:$.noop},callback:null,items:{},build:!1,types:{},determinePosition:a.determinePosition,position:a.position,positionSubmenu:a.positionSubmenu}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}n(2);var o=a(n(3)),i=a(n(10)),r=new o.default,s=function(e,t){r.execute(e,t)};s.getInputValues=function(e,t){return r.getInputValues(e,t)},s.setInputValues=function(e,t){return r.getInputValues(e,t)},s.fromMenu=function(e){return r.html5builder.fromMenu(e)},s.defaults=r.defaults,s.types=r.defaults.types,s.manager=r,s.handle=r.handler,s.operations=r.operations,s.menus=r.menus,s.namespaces=r.namespaces,$.fn.contextMenu=i.default,$.contextMenu=s,e.exports=o.default},function(e,t){},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=a(n(4)),r=a(n(0)),s=a(n(8)),c=a(n(9)),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.html5builder=new s.default,this.defaults=r.default,this.handler=new c.default,this.operations=new i.default,this.namespaces={},this.initialized=!1,this.menus={},this.counter=0}return o(e,[{key:"execute",value:function(e,t){var n=this,a=this.normalizeArguments(e,t);e=a.operation,t=a.options;var o=$.extend(!0,{manager:this},this.defaults,t||{}),i=$(document),r=i,s=!1;switch(o.context&&o.context.length?(r=$(o.context).first(),o.context=r.get(0),s=!$(o.context).is($(document))):o.context=document,e){case"update":if(s)this.operations.update(null,r);else for(var c in this.menus)this.menus.hasOwnProperty(c)&&this.operations.update(null,this.menus[c]);break;case"create":if(!o.selector)throw new Error("No selector specified");if(o.selector.match(/.context-menu-(list|item|input)($|\s)/))throw new Error('Cannot bind to selector "'+o.selector+'" as it contains a reserved className');if(!o.build&&(!o.items||$.isEmptyObject(o.items)))throw new Error("No Items specified");if(this.counter++,o.ns=".contextMenu"+this.counter,s||(this.namespaces[o.selector]=o.ns),this.menus[o.ns]=o,o.trigger||(o.trigger="right"),!this.initialized){var l="click"===o.itemClickEvent?"click.contextMenu":"mouseup.contextMenu",u={"contextmenu:focus.contextMenu":this.handler.focusItem,"contextmenu:blur.contextMenu":this.handler.blurItem,"contextmenu.contextMenu":this.handler.abortevent,"mouseenter.contextMenu":this.handler.itemMouseenter,"mouseleave.contextMenu":this.handler.itemMouseleave};u[l]=this.handler.itemClick,i.on({"contextmenu:hide.contextMenu":this.handler.hideMenu,"prevcommand.contextMenu":this.handler.prevItem,"nextcommand.contextMenu":this.handler.nextItem,"contextmenu.contextMenu":this.handler.abortevent,"mouseenter.contextMenu":this.handler.menuMouseenter,"mouseleave.contextMenu":this.handler.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",this.handler.inputClick).on(u,".context-menu-item"),this.initialized=!0}switch(r.on("contextmenu"+o.ns,o.selector,o,this.handler.contextmenu),s&&r.on("remove"+o.ns,function(){$(this).contextMenu("destroy")}),o.trigger){case"hover":r.on("mouseenter"+o.ns,o.selector,o,this.handler.mouseenter).on("mouseleave"+o.ns,o.selector,o,this.handler.mouseleave);break;case"left":r.on("click"+o.ns,o.selector,o,this.handler.click);break;case"touchstart":r.on("touchstart"+o.ns,o.selector,o,this.handler.click)}o.build||this.operations.create(null,o);break;case"destroy":var d=void 0;if(s){var m=o.context;Object.keys(this.menus).forEach(function(e){var t=n.menus[e];return!t||(!$(m).is(t.selector)||((d=$(".context-menu-list").filter(":visible")).length&&d.data().contextMenuRoot.$trigger.is($(t.context).find(t.selector))&&d.trigger("contextmenu:hide",{force:!0}),n.menus[t.ns].$menu&&n.menus[t.ns].$menu.remove(),delete n.menus[t.ns],$(t.context).off(t.ns),!0))})}else o.selector?this.namespaces[o.selector]&&((d=$(".context-menu-list").filter(":visible")).length&&d.data().contextMenuRoot.$trigger.is(o.selector)&&d.trigger("contextmenu:hide",{force:!0}),this.menus[this.namespaces[o.selector]].$menu&&this.menus[this.namespaces[o.selector]].$menu.remove(),delete this.menus[this.namespaces[o.selector]],i.off(this.namespaces[o.selector])):(i.off(".contextMenu .contextMenuAutoHide"),Object.keys(this.menus).forEach(function(e){var t=n.menus[e];$(t.context).off(t.ns)}),this.namespaces={},this.menus={},this.counter=0,this.initialized=!1,$("#context-menu-layer, .context-menu-list").remove());break;case"html5":(!$.support.htmlCommand&&!$.support.htmlMenuitem||"boolean"==typeof t&&t)&&$('menu[type="context"]').each(function(){this.id&&$.contextMenu({selector:"[contextmenu="+this.id+"]",items:$.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw new Error('Unknown operation "'+e+'"')}return this}},{key:"normalizeArguments",value:function(e,t){return"string"!=typeof e&&(t=e,e="create"),"string"==typeof t?t={selector:t}:void 0===t&&(t={}),{operation:e,options:t}}},{key:"setInputValues",value:function(e,t){void 0===t&&(t={}),$.each(e.inputs,function(e,n){switch(n.type){case"text":case"textarea":n.value=t[e]||"";break;case"checkbox":n.selected=!!t[e];break;case"radio":n.selected=(t[n.radio]||"")===n.value;break;case"select":n.selected=t[e]||""}})}},{key:"getInputValues",value:function(e,t){return void 0===t&&(t={}),$.each(e.inputs,function(e,n){switch(n.type){case"text":case"textarea":case"select":t[e]=n.$input.val();break;case"checkbox":t[e]=n.$input.prop("checked");break;case"radio":n.$input.prop("checked")&&(t[n.radio]=n.value)}}),t}}]),e}();t.default=l},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=a(n(5)),s=a(n(6)),c=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this}return i(e,[{key:"show",value:function(e,t,n,a){var o=$(this),i={};if($("#context-menu-layer").trigger("mousedown"),t.$trigger=o,!1!==t.events.show.call(o,e,t)){if(t.manager.operations.update.call(o,e,t),t.position.call(o,e,t,n,a),t.zIndex){var s=t.zIndex;"function"==typeof t.zIndex&&(s=t.zIndex.call(o,t)),i.zIndex=r.default.zindex(o)+s}t.manager.operations.layer.call(t.$menu,e,t,i.zIndex),t.$menu.find("ul").css("zIndex",i.zIndex+1),t.$menu.css(i)[t.animation.show](t.animation.duration,function(){o.trigger("contextmenu:visible"),t.manager.operations.activated(e,t),t.events.activated(o,e,t)}),o.data("contextMenu",t).addClass("context-menu-active"),$(document).off("keydown.contextMenu").on("keydown.contextMenu",t,t.manager.handler.key),t.autoHide&&$(document).on("mousemove.contextMenuAutoHide",function(e){var n=o.offset();n.right=n.left+o.outerWidth(),n.bottom=n.top+o.outerHeight(),!t.$layer||t.hovering||e.pageX>=n.left&&e.pageX<=n.right&&e.pageY>=n.top&&e.pageY<=n.bottom||setTimeout(function(){t.hovering||null===t.$menu||void 0===t.$menu||t.$menu.trigger("contextmenu:hide")},50)})}else t.manager.handler.$currentTrigger=null}},{key:"hide",value:function(e,t,n){var a=$(this);if("object"!==(void 0===t?"undefined":o(t))&&a.data("contextMenu"))t=a.data("contextMenu");else if("object"!==(void 0===t?"undefined":o(t)))return;if(n||!t.events||!1!==t.events.hide.call(a,e,t)){if(a.removeData("contextMenu").removeClass("context-menu-active"),t.$layer){setTimeout(function(e){return function(){e.remove()}}(t.$layer),10);try{delete t.$layer}catch(e){t.$layer=null}}t.manager.handler.$currentTrigger=null,t.$menu.find("."+t.classNames.hover).trigger("contextmenu:blur"),t.$selected=null,t.$menu.find("."+t.classNames.visible).removeClass(t.classNames.visible),$(document).off(".contextMenuAutoHide").off("keydown.contextMenu"),t.$menu&&t.$menu[t.animation.hide](t.animation.duration,function(){t.build&&(t.$menu.remove(),Object.keys(t).forEach(function(e){switch(e){case"ns":case"selector":case"build":case"trigger":return!0;default:t[e]=void 0;try{delete t[e]}catch(e){}return!0}})),setTimeout(function(){a.trigger("contextmenu:hidden")},10)})}}},{key:"create",value:function(e,t,n){function a(e){var t=$("<span></span>");if(e._accesskey)e._beforeAccesskey&&t.append(document.createTextNode(e._beforeAccesskey)),$("<span></span>").addClass("context-menu-accesskey").text(e._accesskey).appendTo(t),e._afterAccesskey&&t.append(document.createTextNode(e._afterAccesskey));else if(e.isHtmlName){if(void 0!==e.accesskey)throw new Error("accesskeys are not compatible with HTML names and cannot be used together in the same item");t.html(e.name)}else t.text(e.name);return t}void 0===n&&(n=t),t.$menu=$('<ul class="context-menu-list"></ul>').addClass(t.className||"").data({contextMenu:t,contextMenuRoot:n}),$.each(["callbacks","commands","inputs"],function(e,a){t[a]={},n[a]||(n[a]={})}),n.accesskeys||(n.accesskeys={}),$.each(t.items,function(o,i){var c=$('<li class="context-menu-item"></li>').addClass(i.className||""),l=null,u=null;if(c.on("click",$.noop),"string"!=typeof i&&"cm_seperator"!==i.type||(i={type:s.default.separator}),i.$node=c.data({contextMenu:t,contextMenuRoot:n,contextMenuKey:o}),void 0!==i.accesskey)for(var d,m=r.default.splitAccesskey(i.accesskey),p=0;d=m[p];p++)if(!n.accesskeys[d]){n.accesskeys[d]=i;var f=i.name.match(new RegExp("^(.*?)("+d+")(.*)$","i"));f&&(i._beforeAccesskey=f[1],i._accesskey=f[2],i._afterAccesskey=f[3]);break}if(i.type&&n.types[i.type])n.types[i.type].call(c,i,t,n),$.each([t,n],function(e,n){n.commands[o]=i,!$.isFunction(i.callback)||void 0!==n.callbacks[o]&&void 0!==t.type||(n.callbacks[o]=i.callback)});else{switch(i.type===s.default.separator?c.addClass("context-menu-separator "+n.classNames.notSelectable):i.type===s.default.html?c.addClass("context-menu-html "+n.classNames.notSelectable):i.type&&i.type!==s.default.submenu?(l=$("<label></label>").appendTo(c),a(i).appendTo(l),c.addClass("context-menu-input"),t.hasTypes=!0,$.each([t,n],function(e,t){t.commands[o]=i,t.inputs[o]=i})):i.items&&(i.type=s.default.submenu),i.type){case s.default.separator:break;case s.default.text:u=$('<input type="text" value="1" name="" />').attr("name","context-menu-input-"+o).val(i.value||"").appendTo(l);break;case s.default.textarea:u=$('<textarea name=""></textarea>').attr("name","context-menu-input-"+o).val(i.value||"").appendTo(l),i.height&&u.height(i.height);break;case s.default.checkbox:u=$('<input type="checkbox" value="1" name="" />').attr("name","context-menu-input-"+o).val(i.value||"").prop("checked",!!i.selected).prependTo(l);break;case s.default.radio:u=$('<input type="radio" value="1" name="" />').attr("name","context-menu-input-"+i.radio).val(i.value||"").prop("checked",!!i.selected).prependTo(l);break;case s.default.select:u=$('<select name=""></select>').attr("name","context-menu-input-"+o).appendTo(l),i.options&&($.each(i.options,function(e,t){$("<option></option>").val(e).text(t).appendTo(u)}),u.val(i.selected));break;case s.default.submenu:a(i).appendTo(c),i.appendTo=i.$node,c.data("contextMenu",i).addClass("context-menu-submenu"),i.callback=null,"function"==typeof i.items.then?n.manager.operations.processPromises(e,i,n,i.items):n.manager.operations.create(e,i,n);break;case s.default.html:$(i.html).appendTo(c);break;default:$.each([t,n],function(e,n){n.commands[o]=i,!$.isFunction(i.callback)||void 0!==n.callbacks[o]&&void 0!==t.type||(n.callbacks[o]=i.callback)}),a(i).appendTo(c)}i.type&&i.type!==s.default.submenu&&i.type!==s.default.html&&i.type!==s.default.separator&&(u.on("focus",n.manager.handler.focusInput).on("blur",n.manager.handler.blurInput),i.events&&u.on(i.events,t)),i.icon&&($.isFunction(i.icon)?i._icon=i.icon.call(this,e,c,o,i,t,n):"string"==typeof i.icon&&"fa-"===i.icon.substring(0,3)?i._icon=n.classNames.icon+" "+n.classNames.icon+"--fa fa "+i.icon:i._icon=n.classNames.icon+" "+n.classNames.icon+"-"+i.icon,c.addClass(i._icon))}i.$input=u,i.$label=l,c.appendTo(t.$menu),!t.hasTypes&&$.support.eventSelectstart&&c.on("selectstart.disableTextSelect",t.manager.handler.abortevent)}),t.$node||t.$menu.css("display","none").addClass("context-menu-root"),t.$menu.appendTo(t.appendTo||document.body)}},{key:"resize",value:function(e,t,n){var a=void 0;t.css({position:"absolute",display:"block"}),t.data("width",(a=t.get(0)).getBoundingClientRect?Math.ceil(a.getBoundingClientRect().width):t.outerWidth()+1),t.css({position:"static",minWidth:"0px",maxWidth:"100000px"}),t.find("> li > ul").each(function(t,n){e.data.manager.operations.resize(e,$(n),!0)}),n||t.find("ul").addBack().css({position:"",display:"",minWidth:"",maxWidth:""}).outerWidth(function(){return $(this).data("width")})}},{key:"update",value:function(e,t,n){var a=this;void 0===n&&(n=t).manager.operations.resize(e,t.$menu),t.$menu.children().each(function(o,i){var r=$(i),c=r.data("contextMenuKey"),l=t.items[c],u=$.isFunction(l.disabled)&&l.disabled.call(a,e,c,t,n)||!0===l.disabled,d=void 0;if(d=$.isFunction(l.visible)?l.visible.call(a,e,c,t,n):void 0===l.visible||!0===l.visible,r[d?"show":"hide"](),r[u?"addClass":"removeClass"](n.classNames.disabled),$.isFunction(l.icon)&&(r.removeClass(l._icon),l._icon=l.icon.call(this,a,r,c,l),r.addClass(l._icon)),l.type)switch(r.find("input, select, textarea").prop("disabled",u),l.type){case s.default.text:case s.default.textarea:l.$input.val(l.value||"");break;case s.default.checkbox:case s.default.radio:l.$input.val(l.value||"").prop("checked",!!l.selected);break;case s.default.select:l.$input.val((0===l.selected?"0":l.selected)||"")}l.$menu&&n.manager.operations.update.call(a,e,l,n)})}},{key:"layer",value:function(e,t,n){var a=$(window),o=t.$layer=$('<div id="context-menu-layer"></div>').css({height:a.height(),width:a.width(),display:"block",position:"fixed","z-index":n,top:0,left:0,opacity:0,filter:"alpha(opacity=0)","background-color":"#000"}).data("contextMenuRoot",t).insertBefore(this).on("contextmenu",t.manager.handler.abortevent).on("mousedown",t.manager.handler.layerClick);return void 0===document.body.style.maxWidth&&o.css({position:"absolute",height:$(document).height()}),o}},{key:"processPromises",value:function(e,t,n,a){function o(t,n,a){void 0!==n.$menu&&n.$menu.is(":visible")&&(t.$node.removeClass(n.classNames.iconLoadingClass),t.items=a,n.manager.operations.create(e,t,n),n.manager.operations.update(e,t,n),n.positionSubmenu.call(t.$node,e,t.$menu))}function i(e,t,n){void 0===n?(n={error:{name:"No items and no error item",icon:"context-menu-icon context-menu-icon-quit"}},window.console&&(console.error||console.log).call(console,'When you reject a promise, provide an "items" object, equal to normal sub-menu items')):"string"==typeof n&&(n={error:{name:n}}),o(e,t,n)}t.$node.addClass(n.classNames.iconLoadingClass),a.then(function(e,t,n){void 0===n&&i(void 0),o(e,t,n)}.bind(this,t,n),i.bind(this,t,n))}},{key:"activated",value:function(e,t){var n=t.$menu,a=n.offset(),o=$(window).height(),i=$(window).scrollTop(),r=n.height();r>o?n.css({height:o+"px","overflow-x":"hidden","overflow-y":"auto",top:i+"px"}):(a.top<i||a.top+r>i+o)&&n.css({top:"0px"})}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"zindex",value:function(e){for(var t=0,n=e;t=Math.max(t,parseInt(n.css("z-index"),10)||0),(n=n.parent())&&n.length&&!("html body".indexOf(n.prop("nodeName").toLowerCase())>-1););return t}},{key:"splitAccesskey",value:function(e){for(var t,n=e.split(/\s+/),a=[],o=0;t=n[o];o++)t=t.charAt(0).toUpperCase(),a.push(t);return a}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={simple:"",text:"text",textarea:"textarea",checkbox:"checkbox",radio:"radio",select:"select",html:"html",separator:"cm_separator",submenu:"sub"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.determinePosition=function(e){if($.ui&&$.ui.position)e.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var t=this.offset();t.top+=this.outerHeight(),t.left+=this.outerWidth()/2-e.outerWidth()/2,e.css(t)}},t.position=function(e,t,n,a){var o=$(window),i=void 0;if(n||a){if("maintain"===n&&"maintain"===a)i=t.$menu.position();else{var r=t.$menu.offsetParent().offset();i={top:a-r.top,left:n-r.left}}var s=o.scrollTop()+o.height(),c=o.scrollLeft()+o.width(),l=t.$menu.outerHeight(),u=t.$menu.outerWidth();i.top+l>s&&(i.top-=l),i.top<0&&(i.top=0),i.left+u>c&&(i.left-=u),i.left<0&&(i.left=0),t.$menu.css(i)}else t.determinePosition.call(this,t.$menu)},t.positionSubmenu=function(e,t){if(void 0!==t)if($.ui&&$.ui.position)t.css("display","block").position({my:"left top-5",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var n={top:-9,left:this.outerWidth()-5};t.css(n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"inputLabel",value:function(e){return e.id&&$('label[for="'+e.id+'"]').val()||e.name}},{key:"fromMenu",value:function(e){var t=$(e),n={};return this.build(n,t.children()),n}},{key:"build",value:function(e,t,n){return n||(n=0),t.each(function(){var t=$(this),a=this,o=this.nodeName.toLowerCase(),i=void 0,r=void 0;switch("label"===o&&t.find("input, textarea, select").length&&(i=t.text(),o=(a=(t=t.children().first()).get(0)).nodeName.toLowerCase()),o){case"menu":r={name:t.attr("label"),items:{}},n=this.html5builder(r.items,t.children(),n);break;case"a":case"button":r={name:t.text(),disabled:!!t.attr("disabled"),callback:function(){t.get(0).click()}};break;case"menuitem":case"command":switch(t.attr("type")){case void 0:case"command":case"menuitem":r={name:t.attr("label"),disabled:!!t.attr("disabled"),icon:t.attr("icon"),callback:function(){t.get(0).click()}};break;case"checkbox":r={type:"checkbox",disabled:!!t.attr("disabled"),name:t.attr("label"),selected:!!t.attr("checked")};break;case"radio":r={type:"radio",disabled:!!t.attr("disabled"),name:t.attr("label"),radio:t.attr("radiogroup"),value:t.attr("id"),selected:!!t.attr("checked")};break;default:r=void 0}break;case"hr":r="-------";break;case"input":switch(t.attr("type")){case"text":r={type:"text",name:i||this.inputLabel(a),disabled:!!t.attr("disabled"),value:t.val()};break;case"checkbox":r={type:"checkbox",name:i||this.inputLabel(a),disabled:!!t.attr("disabled"),selected:!!t.attr("checked")};break;case"radio":r={type:"radio",name:i||this.inputLabel(a),disabled:!!t.attr("disabled"),radio:!!t.attr("name"),value:t.val(),selected:!!t.attr("checked")};break;default:r=void 0}break;case"select":r={type:"select",name:i||this.inputLabel(a),disabled:!!t.attr("disabled"),selected:t.val(),options:{}},t.children().each(function(){r.options[this.value]=$(this).text()});break;case"textarea":r={type:"textarea",name:i||this.inputLabel(a),disabled:!!t.attr("disabled"),value:t.val()};break;case"label":break;default:r={type:"html",html:t.clone(!0)}}r&&(e["key"+ ++n]=r)}),n}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$currentTrigger=null,this.hoveract={}}return a(e,[{key:"abortevent",value:function(e){e.preventDefault(),e.stopImmediatePropagation()}},{key:"contextmenu",value:function(e){var t=$(e.currentTarget);if("right"===e.data.trigger&&(e.preventDefault(),e.stopImmediatePropagation()),!("right"!==e.data.trigger&&"demand"!==e.data.trigger&&e.originalEvent||!(void 0===e.mouseButton||!e.data||"left"===e.data.trigger&&0===e.mouseButton||"right"===e.data.trigger&&2===e.mouseButton)||t.hasClass("context-menu-active")||t.hasClass("context-menu-disabled"))){if(e.data.manager.handler.$currentTrigger=t,e.data.build){var n=e.data.build(e,t);if(!1===n)return;if(e.data=$.extend(!0,{},o.default,e.data,n||{}),!e.data.items||$.isEmptyObject(e.data.items))throw window.console&&(console.error||console.log).call(console,"No items specified to show in contextMenu"),new Error("No Items specified");e.data.$trigger=e.data.manager.handler.$currentTrigger,e.data.manager.operations.create(e,e.data)}var a=!1;for(var i in e.data.items)if(e.data.items.hasOwnProperty(i)){($.isFunction(e.data.items[i].visible)?e.data.items[i].visible.call(t,e,i,e.data,e.data):void 0===e.data.items[i]||!e.data.items[i].visible||!0===e.data.items[i].visible)&&(a=!0)}a&&e.data.manager.operations.show.call(t,e,e.data,e.pageX,e.pageY)}}},{key:"click",value:function(e){e.preventDefault(),e.stopImmediatePropagation(),$(this).trigger($.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY,originalEvent:e}))}},{key:"mousedown",value:function(e){var t=$(this);e.data.manager.handler.$currentTrigger&&e.data.manager.handler.$currentTrigger.length&&!e.data.manager.handler.$currentTrigger.is(t)&&e.data.manager.handler.$currentTrigger.data("contextMenu").$menu.trigger($.Event("contextmenu",{originalEvent:e})),2===e.button&&(e.data.manager.handler.$currentTrigger=t.data("contextMenuActive",!0))}},{key:"mouseup",value:function(e){var t=$(this);t.data("contextMenuActive")&&e.data.manager.handler.$currentTrigger&&e.data.manager.handler.$currentTrigger.length&&e.data.manager.handler.$currentTrigger.is(t)&&!t.hasClass("context-menu-disabled")&&(e.preventDefault(),e.stopImmediatePropagation(),e.data.manager.handler.$currentTrigger=t,t.trigger($.Event("contextmenu",{data:e.data,pageX:e.pageX,pageY:e.pageY,originalEvent:e}))),t.removeData("contextMenuActive")}},{key:"mouseenter",value:function(e){var t=$(this),n=$(e.relatedTarget),a=$(document);n.is(".context-menu-list")||n.closest(".context-menu-list").length||e.data.manager.handler.$currentTrigger&&e.data.manager.handler.$currentTrigger.length||(e.data.manager.handler.hoveract.pageX=e.pageX,e.data.manager.handler.hoveract.pageY=e.pageY,e.data.manager.handler.hoveract.data=e.data,a.on("mousemove.contextMenuShow",e.data.manager.handler.mousemove),e.data.manager.handler.hoveract.timer=setTimeout(function(){e.data.manager.handler.hoveract.timer=null,a.off("mousemove.contextMenuShow"),e.data.manager.handler.$currentTrigger=t,t.trigger($.Event("contextmenu",{data:e.data.manager.handler.hoveract.data,pageX:e.data.manager.handler.hoveract.pageX,pageY:e.data.manager.handler.hoveract.pageY}))},e.data.delay))}},{key:"mousemove",value:function(e){e.data.manager.handler.hoveract.pageX=e.pageX,e.data.manager.handler.hoveract.pageY=e.pageY}},{key:"mouseleave",value:function(e){var t=$(e.relatedTarget);if(!t.is(".context-menu-list")&&!t.closest(".context-menu-list").length){try{clearTimeout(e.data.manager.handler.hoveract.timer)}catch(e){}e.data.manager.handler.hoveract.timer=null}}},{key:"layerClick",value:function(e){var t=$(this).data("contextMenuRoot"),n=e.button,a=e.pageX,o=e.pageY,i=void 0,r=void 0;e.preventDefault(),setTimeout(function(){var s=$(window),c="left"===t.trigger&&0===n||"right"===t.trigger&&2===n;if(document.elementFromPoint&&t.$layer){if(t.$layer.hide(),(i=document.elementFromPoint(a-s.scrollLeft(),o-s.scrollTop())).isContentEditable){var l=document.createRange(),u=window.getSelection();l.selectNode(i),l.collapse(!0),u.removeAllRanges(),u.addRange(l)}$(i).trigger(e),t.$layer.show()}if(t.hideOnSecondTrigger&&c&&null!==t.$menu&&void 0!==t.$menu)t.$menu.trigger("contextmenu:hide",{originalEvent:e});else{if(t.reposition&&c)if(document.elementFromPoint){if(t.$trigger.is(i))return void t.position.call(t.$trigger,e,t,a,o)}else{r=t.$trigger.offset();var d=$(window);if(r.top+=d.scrollTop(),r.top<=e.pageY&&(r.left+=d.scrollLeft(),r.left<=e.pageX&&(r.bottom=r.top+t.$trigger.outerHeight(),r.bottom>=e.pageY&&(r.right=r.left+t.$trigger.outerWidth(),r.right>=e.pageX))))return void t.position.call(t.$trigger,e,t,a,o)}i&&c&&t.$trigger.one("contextmenu:hidden",function(){$(i).contextMenu({x:a,y:o,button:n,originalEvent:e})}),null!==t&&void 0!==t&&null!==t.$menu&&void 0!==t.$menu&&t.$menu.trigger("contextmenu:hide",{originalEvent:e})}},50)}},{key:"keyStop",value:function(e,t){t.isInput||e.preventDefault(),e.stopPropagation()}},{key:"key",value:function(e){var t={};e.data.manager.handler.$currentTrigger&&(t=e.data.manager.handler.$currentTrigger.data("contextMenu")||{}),void 0===t.zIndex&&(t.zIndex=0);var n=function e(t){return""!==t.style.zIndex?t.style.zIndex:null!==t.offsetParent&&void 0!==t.offsetParent?e(t.offsetParent):null!==t.parentElement&&void 0!==t.parentElement?e(t.parentElement):void 0}(e.target);if(!(t.$menu&&parseInt(n,10)>parseInt(t.$menu.css("zIndex"),10))){switch(e.keyCode){case 9:case 38:if(e.data.manager.handler.keyStop(e,t),t.isInput){if(9===e.keyCode&&e.shiftKey)return e.preventDefault(),t.$selected&&t.$selected.find("input, textarea, select").blur(),void(null!==t.$menu&&void 0!==t.$menu&&t.$menu.trigger("prevcommand",{originalEvent:e}));if(38===e.keyCode&&"checkbox"===t.$selected.find("input, textarea, select").prop("type"))return void e.preventDefault()}else if(9!==e.keyCode||e.shiftKey)return void(null!==t.$menu&&void 0!==t.$menu&&t.$menu.trigger("prevcommand",{originalEvent:e}));break;case 40:if(e.data.manager.handler.keyStop(e,t),!t.isInput)return void(null!==t.$menu&&void 0!==t.$menu&&t.$menu.trigger("nextcommand",{originalEvent:e}));if(9===e.keyCode)return e.preventDefault(),t.$selected&&t.$selected.find("input, textarea, select").blur(),void(null!==t.$menu&&void 0!==t.$menu&&t.$menu.trigger("nextcommand",{originalEvent:e}));if(40===e.keyCode&&"checkbox"===t.$selected.find("input, textarea, select").prop("type"))return void e.preventDefault();break;case 37:if(e.data.manager.handler.keyStop(e,t),t.isInput||!t.$selected||!t.$selected.length)break;if(!t.$selected.parent().hasClass("context-menu-root")){var a=t.$selected.parent().parent();return t.$selected.trigger("contextmenu:blur",{originalEvent:e}),void(t.$selected=a)}break;case 39:if(e.data.manager.handler.keyStop(e,t),t.isInput||!t.$selected||!t.$selected.length)break;var o=t.$selected.data("contextMenu")||{};if(o.$menu&&t.$selected.hasClass("context-menu-submenu"))return t.$selected=null,o.$selected=null,void o.$menu.trigger("nextcommand",{originalEvent:e});break;case 35:case 36:if(t.$selected&&t.$selected.find("input, textarea, select").length)break;(t.$selected&&t.$selected.parent()||t.$menu).children(":not(."+t.classNames.disabled+", ."+t.classNames.notSelectable+")")[36===e.keyCode?"first":"last"]().trigger("contextmenu:focus",{originalEvent:e}),e.preventDefault();break;case 13:if(e.data.manager.handler.keyStop(e,t),t.isInput){if(t.$selected&&!t.$selected.is("textarea, select"))return void e.preventDefault();break}return void(void 0!==t.$selected&&null!==t.$selected&&t.$selected.trigger("mouseup",{originalEvent:e}));case 32:case 33:case 34:return void e.data.manager.handler.keyStop(e,t);case 27:return e.data.manager.handler.keyStop(e,t),void(null!==t.$menu&&void 0!==t.$menu&&t.$menu.trigger("contextmenu:hide",{originalEvent:e}));default:var i=String.fromCharCode(e.keyCode).toUpperCase();if(t.accesskeys&&t.accesskeys[i])return void t.accesskeys[i].$node.trigger(t.accesskeys[i].$menu?"contextmenu:focus":"mouseup",{originalEvent:e})}e.stopPropagation(),void 0!==t.$selected&&null!==t.$selected&&t.$selected.trigger(e)}}},{key:"prevItem",value:function(e){e.stopPropagation();var t=$(this).data("contextMenu")||{},n=$(this).data("contextMenuRoot")||{};if(t.$selected){var a=t.$selected;(t=t.$selected.parent().data("contextMenu")||{}).$selected=a}for(var o=t.$menu.children(),i=t.$selected&&t.$selected.prev().length?t.$selected.prev():o.last(),r=i;i.hasClass(n.classNames.disabled)||i.hasClass(n.classNames.notSelectable)||i.is(":hidden");)if((i=i.prev().length?i.prev():o.last()).is(r))return;t.$selected&&n.manager.handler.itemMouseleave.call(t.$selected.get(0),e),n.manager.handler.itemMouseenter.call(i.get(0),e);var s=i.find("input, textarea, select");s.length&&s.focus()}},{key:"nextItem",value:function(e){e.stopPropagation();var t=$(this).data("contextMenu")||{},n=$(this).data("contextMenuRoot")||{};if(t.$selected){var a=t.$selected;(t=t.$selected.parent().data("contextMenu")||{}).$selected=a}for(var o=t.$menu.children(),i=t.$selected&&t.$selected.next().length?t.$selected.next():o.first(),r=i;i.hasClass(n.classNames.disabled)||i.hasClass(n.classNames.notSelectable)||i.is(":hidden");)if((i=i.next().length?i.next():o.first()).is(r))return;t.$selected&&n.manager.handler.itemMouseleave.call(t.$selected.get(0),e),n.manager.handler.itemMouseenter.call(i.get(0),e);var s=i.find("input, textarea, select");s.length&&s.focus()}},{key:"focusInput",value:function(e){var t=$(this).closest(".context-menu-item"),n=t.data(),a=n.contextMenu,o=n.contextMenuRoot;o.$selected=a.$selected=t,o.isInput=a.isInput=!0}},{key:"blurInput",value:function(e){var t=$(this).closest(".context-menu-item").data(),n=t.contextMenu;t.contextMenuRoot.isInput=n.isInput=!1}},{key:"menuMouseenter",value:function(e){$(this).data().contextMenuRoot.hovering=!0}},{key:"menuMouseleave",value:function(e){var t=$(this).data().contextMenuRoot;t.$layer&&t.$layer.is(e.relatedTarget)&&(t.hovering=!1)}},{key:"itemMouseenter",value:function(e){var t=$(this),n=t.data(),a=n.contextMenu,o=n.contextMenuRoot;o.hovering=!0,e&&o.$layer&&o.$layer.is(e.relatedTarget)&&(e.preventDefault(),e.stopImmediatePropagation()),(a.$menu?a:o).$menu.children("."+o.classNames.hover).trigger("contextmenu:blur").children(".hover").trigger("contextmenu:blur",{originalEvent:e}),t.hasClass(o.classNames.disabled)||t.hasClass(o.classNames.notSelectable)?a.$selected=null:t.trigger("contextmenu:focus",{originalEvent:e})}},{key:"itemMouseleave",value:function(e){var t=$(this),n=t.data(),a=n.contextMenu,o=n.contextMenuRoot;if(o!==a&&o.$layer&&o.$layer.is(e.relatedTarget))return void 0!==o.$selected&&null!==o.$selected&&o.$selected.trigger("contextmenu:blur",{originalEvent:e}),e.preventDefault(),e.stopImmediatePropagation(),void(o.$selected=a.$selected=a.$node);a&&a.$menu&&a.$menu.hasClass(o.classNames.visible)||t.trigger("contextmenu:blur")}},{key:"itemClick",value:function(e){var t=$(this),n=t.data(),a=n.contextMenu,o=n.contextMenuRoot,i=n.contextMenuKey,r=void 0;if(!(!a.items[i]||t.is("."+o.classNames.disabled+", .context-menu-separator, ."+o.classNames.notSelectable)||t.is(".context-menu-submenu")&&!1===o.selectableSubMenu)){if(e.preventDefault(),e.stopImmediatePropagation(),$.isFunction(a.callbacks[i])&&Object.prototype.hasOwnProperty.call(a.callbacks,i))r=a.callbacks[i];else{if(!$.isFunction(o.callback))return;r=o.callback}!1!==r.call(o.$trigger,e,i,a,o)?o.$menu.trigger("contextmenu:hide"):o.$menu.parent().length&&o.manager.operations.update.call(o.$trigger,e,o)}}},{key:"inputClick",value:function(e){e.stopImmediatePropagation()}},{key:"hideMenu",value:function(e,t){var n=$(this).data("contextMenuRoot");n.manager.operations.hide.call(n.$trigger,e,n,t&&t.force)}},{key:"focusItem",value:function(e){e.stopPropagation();var t=$(this),n=t.data(),a=n.contextMenu,o=n.contextMenuRoot;t.hasClass(o.classNames.disabled)||t.hasClass(o.classNames.notSelectable)||(t.addClass([o.classNames.hover,o.classNames.visible].join(" ")).parent().find(".context-menu-item").not(t).removeClass(o.classNames.visible).filter("."+o.classNames.hover).trigger("contextmenu:blur"),a.$selected=o.$selected=t,a&&a.$node&&a.$node.hasClass("context-menu-submenu")&&a.$node.addClass(o.classNames.hover),a.$node&&o.positionSubmenu.call(a.$node,e,a.$menu))}},{key:"blurItem",value:function(e){e.stopPropagation();var t=$(this),n=t.data(),a=n.contextMenu,o=n.contextMenuRoot;o.autoHide&&t.removeClass(o.classNames.visible),t.removeClass(o.classNames.hover),a.$selected=null}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this,n=e;if(t.length>0)if(void 0===e)t.first().trigger("contextmenu");else if(void 0!==e.x&&void 0!==e.y)t.first().trigger($.Event("contextmenu",{pageX:e.x,pageY:e.y,mouseButton:e.button}));else if("hide"===e){var a=this.first().data("contextMenu")?this.first().data("contextMenu").$menu:null;a&&a.trigger("contextmenu:hide")}else"destroy"===e?$.contextMenu("destroy",{context:this}):$.isPlainObject(e)?(e.context=this,$.contextMenu("create",e)):e?t.removeClass("context-menu-disabled"):e||t.addClass("context-menu-disabled");else $.each($.contextMenu.menus,function(){this.selector===t.selector&&(n.data=this,$.extend(n.data,{trigger:"demand"}))}),$.contextMenu.handle.contextmenu.call(n.target,n);return this}}])});
//# sourceMappingURL=jquery.contextMenu.min.js.map